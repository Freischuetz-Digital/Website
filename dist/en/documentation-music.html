<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <title>Freischütz Digital</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="author" content="Daniel Röwenstrunk" />

        <link rel="stylesheet" href="../styles/bootstrap.css" />
        <link rel="stylesheet" href="../styles/bootstrap-responsive.css" />
        <link href="../styles/bootswatch.css" rel="stylesheet" />
        <link href="../styles/freidi.css" rel="stylesheet" />
        <link href="../styles/ptsans.css" rel="stylesheet" />

        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../pix/freidi_icon_144.png" />
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../pix/freidi_icon_114.png" />
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../pix/freidi_icon_72.png" />
        <link rel="apple-touch-icon-precomposed" href="../pix/freidi_icon_57.png" />
        <link rel="shortcut icon" href="../pix/freidi_favicon.png" />
    </head>
    <body>
        <div style="position: absolute; right:30px; top: 10px;"><a href="javascript:setLang('de')">DE</a> | <a href="javascript:setLang('en')">EN</a></div>
        <div id="content" class="container">
            <div id="figure-top" class="figure visible-desktop">
                <img style="height: 330px;" src="" alt="" />
            </div>
            <header id="overview" class="jumbotron subhead">
                <div class="row" style="min-height: 0;">
                    <div class="span8">
                        <img style="margin: 40px 0 0 3px;" src="../pix/Logo_greenInset.png" />
                    </div>
                    <div class="span4"> </div>
                </div>
                <div id="navbar" class="subnav">
                    <ul class="nav nav-pills">
                        <li id="nav_freidi" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                aria-haspopup="true" aria-expanded="false">Freischütz Digital <span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="index.html">Project's Goals</a></li>
                                <li><a href="work-packages.html">Work Packages</a></li>
                                <li><a href="locations.html">Institutions</a></li>
                                <li><a href="team.html">People</a></li>
                                <li><a href="process.html">Project History</a></li>
                            </ul>
                        </li>
                        <li id="nav_edition">
                            <a href="edition.html">Edirom Online</a>
                        </li>
                        <li id="nav_data-tools" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                aria-haspopup="true" aria-expanded="false">Data and Tools <span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="data-and-tools.html">Overview</a></li>
                                <li><a href="data.html">Data</a></li>
                                <li><a href="tools.html">Tools</a></li>
                                <li><a href="licences.html">Licenses</a></li>
                            </ul>
                        </li>
                        <li id="nav_demos" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                aria-haspopup="true" aria-expanded="false">Demos <span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="demos.html">Overview</a></li>
                                <li><a href="demo-dynamic-score-rendering.html">Dynamic Score</a></li>
                                <li><a href="demo-genetic-text-stages.html">Text Layers</a></li>
                                <li><a href="demo-visualising-text-annotations.html">Text Annotations</a></li>
                                <li><a href="demo-visualising-text-variance.html">Text Variance</a></li>
                                <li><a href="demo-the-freischuetz-network.html">"The Freischütz Network" (Topic Map)</a></li>
                                <li><a href="demo-sync-player.html">Synchro-Player</a></li>
                                <li><a href="demo-multitrack-data-set.html">Multitrack Dataset</a></li>
                                <li><a href="demo-single-microphone-switcher.html">Single Microphone Switcher</a></li>
                                <li><a href="demo-instrument-equalizer.html">Instrument Equalizer</a></li>
                            </ul>
                        </li>
                        <li id="nav_documentation" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                aria-haspopup="true" aria-expanded="false">Documentation <span
                                    class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="documentation.html">Overview</a></li>
                                <li><a href="documentation-music.html">Score</a></li>
                                <li><a href="documentation-libretti.html">Libretto</a></li>
                                <li><a href="documentation-reference-texts.html">Reference Texts</a></li>
                                <li><a href="documentation-audio.html">Audio</a></li>
                            </ul>
                        </li>
                        <li id="nav_publications" class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"
                                aria-haspopup="true" aria-expanded="false">Publications &amp;
                                Talks <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="publications.html">Publications</a></li>
                                <li><a href="talks.html">Talks</a></li>
                                <li><a href="events.html">Events</a></li>
                                <li><a href="meetings.html">Meetings</a></li>
                            </ul>
                        </li>
                        <li id="nav_freidiplus">
                            <a href="freidiplus.html">FreiDi <span style="font-style:italic;">plus</span></a>
                        </li>
                    </ul>
                </div>
                <div id="backlink" style="display:none;">
                    <a href="#" onclick="nav_back(); false;">zurück</a>
                </div>
            </header>
            
            
            	<section id="documentation-music"><!-- @Daniel: Sollten wir doch en jeweils zur Datei zusetzen, damit wir kein Chaos bauen? -->
		<div class="page-header">
			<h1>Documentation for the Music Text</h1>
		</div>

		<!-- include "_nav-docu.html" -->

		<div class="row" style="margin-bottom: 50px;">

			<div class="docu-project">
				<div class="span12">
					<div class="content">
						<h4>Content</h4>
						<ol type="1">
							<li>
								<a href="#freidi_edition_concept">The FreiDi Edition Concept</a>
							</li>
							<li>
								<a href="#editorial_concept">Edition Concept</a>
							</li>
							<li>
								<a href="#core-concept">The <em>Core</em> Concept</a>
							</li>
							<li>
								<a href="#tools">Tools</a>
								<ul>
									<li><a href="#pitchtool">Pitch-Tool</a></li>
									<li><a href="#controleventtool">Controlevent-Tool</a></li>
								</ul>
							</li>
							<li>
								<a href="#guidelines">Guidelines</a>
							</li>
							<li>
								<a href="#workflows">Workflows</a>
							</li>
						</ol>
					</div>

					<h3 id="freidi_edition_concept">1. The FreiDi Edition Concept </h3>
					<p>The concept „<em>Edition</em>“ in the FreiDi project has a specific meaning not to be confused with that of a traditional analog edition whose primary objective is to establish a scholarly or critical edition of a work. Instead, the project follows the <em>multidimensional model</em> eof an edition, as formulated by Frans Wiering in 2009 (<em>Digital Critical Editons of Music: A Multidimensional Model</em>, London, 2006 / Ashgate, 2009; <a href="http://www.methodsnetwork.ac.uk/redist/pdf/wiering.pdf">&#8594; PDF to download</a>). There, the basis for any such work is a comprehensive data collection in various domains and the versatile linking of their respective items. It is important that the items be available not only as illustrations (thus, for example, as facsimiles or in newly-set music texts), but also in their logical domain (that is, music and texts in the form of <strong>encoded contents</strong>) – adding for music also the acoustic/performative domain. From this base, depending on the user’s knowledge interest, these materials can then be pursued along different paths, including an attempt to establish an “edition” or more accurately, editions, since different viewpoints can or must lead to mutually differing edition results. The project was mainly about demonstrating these possibilities without presenting in itself a critical text – this task was left to the parallel analog edition of <em>Freischütz</em> within the WeGA framework where a single “authoritative” text is created, whereas in FreiDi it was a matter of propagating a more open text concept, of documenting not only the authorized but also the posthumous reception of the text, and of drawing attention to changes in understanding the text or to specific problems by being conveniently able to compare sources. The structural systems of correlating data items with innovative forms of visualization were therefore the focus of the project’s efforts.</p>
					
					<hr/>
					
					<h3 id="editorial_concept">2. The Edition Concept </h3>
					<p>A primary objective of the music edition within the <strong>Freischütz Digital</strong>
						(FreiDi) framework was to show the potential of completely encoding the musical contents and linking them with further edition components. During work on the project it became clear that the effort and expense involved in encoding is <em>much greater in praxis</em> than was originally expected. The complete capture of all available sources was accordingly given up, so that the capacities released could be invested in developing tools to reduce this effort significantly. From the <strong>sustainability</strong> perspective, the project’s focus was on <strong>workflows</strong> that could be used by other projects, thus enhancing their efficiency, whereas the encoding as an equally re-usable project result was <em>quantitatively</em> restricted. In the process, the opera was maintained in both longitudinal and cross sections, that is, on the one hand, the entire work was captured in one source (the autograph), on the other, individual movements were documented with their varying details in all extant sources [we encoded the autograph completely, together with 3 numbers in all sources]. This selection makes it possible to show all editorially relevant phenomena and their implementation in the digital edition, thus avoiding a <em>qualitative</em> restriction on the encoding. 
						The digital music edition of Weber’s
						<em>Freischütz</em> is based on a <strong>comprehensive encoding of the musical sources</strong> with <a href="http://music-encoding.org" class="external">MEI</a>. The sources considered are captured in a delimited diplomatic transcription identifying <em>writing habits</em> pertaining, for instance, to abbreviations and writing them out as needed, the 
						<em>orthography</em> of dynamic markings and <em>notation forms</em> of several voices combined in one staff (notes separately stemmed vs. spelled out as a chord). These encodings are linked with associated facsimiles horizontally bar by bar , or vertically for each individual staff, but are interrelated with each other down to the individual detail. In so doing, evaluating the sources does not lead to different treatment – later copies and prints are as deeply explored as Weber’s autograph.</p>
					<p>From this data plexus the development of the work text can be precisely reconstructed in every detail, thus displaying each variant in both the facsimile and in a diplomatically faithful transcription. The edition’s user can freely select the granularity for comparing the two texts: whether, for example, differences in pitch and duration are to be taken into account, or writing habits are to be compared with each other. Here then, <em>Freischütz</em> offers interesting possibilities for evaluation, so that, for instance, where extant for two copyists are several copies, investigations can very conveniently be carried out by comparing one copyist’s several copies, leading to anticipated new findings.</p>
					<p>As mentioned, the project consciously dispensed with the creation of an <strong>edited text</strong>, 
						unlike in conventional edition concepts, since the actual aim of this kind of edition is 
						<strong>documenting the text development</strong> , well beyond its original composer’s supervision.</p>

					<hr/>

					<h3 id="core-concept">3. The <em>Core</em>-Concept</h3>
					<p>The encodings of the <em>Freischütz</em> musical sources follow the so-called <em>Core</em> concept. Basically, a distinction is made between 
						<em>substantial</em> and <em>accidental</em> information, each of them to be treated in different ways. 
						<em>Substantial</em> information includes, for instance, pitch and duration, articulation directives, or coverage by individual slurs. 
						<em>Accidental</em> information, on the other hand, refers to the kind of beaming, individual abbreviations in the various sources, or the direction of a slur (above or below the staff. Both categories are captured using MEI, but are stored in different files. The first is a so-called <em>core</em> file where all the substantial information of <em>all</em> sources considered is filed. Where sources differ one from another, this is captured by means of 
						<strong>&lt;mei:app&gt;</strong> or <strong>&lt;mei:rdg&gt;</strong>>, i.e., the two (possibly even more) alternative readings are encoded locally to the variant location, and a reference to the corresponding sources established:</p>
					<pre class="prettyprint"><code>&lt;!-- Datei core.xml: --&gt;
&lt;app&gt;
    &lt;rdg source="#A #KA1"&gt;
        &lt;note pname="c"/&gt;
    &lt;/rdg&gt;
    &lt;rdg source="#KA2"&gt;
        &lt;note pname="d"/&gt;
    &lt;/rdg&gt;
&lt;/app&gt;
&lt;!-- This highly simplified example implies that the sources A and KA1 reproduce a note "c" wiedergeben, whereas source KA2 has a "d". --&gt;</code></pre>
					<p>In order to restrict the differences captured among the sources to what is meaningful, only the most important parameters of the music text are captured in the core file. This file facilitates only a <em>meaningful</em> reproduction of the source, not a <em>diplomatic</em> transcription.  For this reason, there is an additional separate file for each individual source, describing the predominantly graphic aspects of the music text. However, in order to avoid duplicating information, these files do not include the encoding of substantial information but are referencing the corresponding spot in the core file. In a simple example of a note stem’s direction, this concept can be illustrated as follows:</p>
					<pre class="prettyprint"><code>&lt;!-- Datei core.xml: --&gt;
&lt;note xml:id="qwert" pname="c" oct="4" dur="4"/&gt;
	                        
&lt;!-- Datei sourceA.xml: --&gt;
&lt;note xml:id="asdfg" sameas="core.xml#qwert" stem.dir="up"/&gt;
	                        
&lt;!-- Datei sourceKA1.xml: --&gt;
&lt;note xml:id="yxcvb" sameas="core.xml#qwert" stem.dir="down"/&gt;</code></pre>
					<p>In the core file the note is captured as "<em>c</em>" in the fourth octave (thus in German, a middle <em>c</em>, i.e. <em>c</em>') ), of quarter-note duration. The source encoding refers explicitly to this note and supplements the information that the note stem is directed upwards (source A) or downwards (source KA1). This makes it clear how less significant deviations can be stored in the source encodings without requiring a separate &lt;app&gt; in the core-file.</p>
					<p>For analytical purposes, the information in the core file suffices, but the two files need to be combined for an (approximate) diplomatic reproduction. Captured only in the source file are also, among others, abbreviations, i.e., reproduced there are abbreviated bar-repeat signs, 
						<em>colla-parte</em> directives, tremolo performance signs and other abbreviations symbols as notated in the source. These individual abbreviations are then also indicated in the written-out form as an alternative in the source file: 
						The encoding specifies that there is a repeat-bar sign in the source whose resolution is four notes. These four notes are then, as before, linked to the core file.  In addition, all resolution notes are linked to their models:</p>
					<pre class="prettyprint"><code>&lt;!-- Datei source.xml: --&gt;
&lt;choice&gt;
    &lt;orig&gt;
        &lt;mRpt/&gt;
    &lt;/orig&gt;
    &lt;reg&gt;
        &lt;note sameas="core.xml#…"/&gt;
        &lt;note sameas="core.xml#…"/&gt;
        &lt;note sameas="core.xml#…"/&gt;
        &lt;note sameas="core.xml#…"/&gt;
    &lt;/reg&gt;
&lt;/choice&gt;</code></pre>
					<p>The encoding specifies that there is a repeat-bar sign in the source whose resolution is four notes. These four notes are then, as before, linked to the core file.  In addition, all resolution notes are linked to their models:</p>
					<pre class="prettyprint"><code>&lt;!-- Datei core.xml, Takt n: --&gt;
&lt;note xml:id="c1" dur="1"/&gt;

&lt;!-- Datei core.xml, Takt n+1: --&gt;
&lt;note xml:id="c2" dur="1"/&gt;

&lt;!-- Datei source.xml, Takt n: --&gt;
&lt;note xml:id="n1" sameas="core.xml#c1"/&gt;

&lt;!-- Datei source.xml, Takt n+1: --&gt;
&lt;choice&gt;
    &lt;orig&gt;
        &lt;mRpt/&gt;
    &lt;/orig&gt;
    &lt;reg&gt;
        &lt;note xml:id="n2" corresp="#n1" sameas="core.xml#c2"/&gt;
    &lt;/reg&gt;
&lt;/choice&gt;</code></pre>
					<p>This shows that even in such a trivial case, combining abbreviations and the separation of core and source files leads to considerable markup with a large number of cross-references. This <em>complexity</em> results, however, from encoding requirements and cannot be changed fundamentally by other encoding concepts. The main advantage of the <em>core</em> model is a fairly clean separation of the “core content,” together with the graphical manifestations of the individual sources, facilitating the identification of the significant deviations. At the same time, e.g., the abbreviation notation in the individual sources, and a comparison of the graphical peculiarities (via the detour in the core file) is still possible.</p>
					
					<!--<h3>open (?) topics</h3>
					<ul>
						<li>durch die Gleichbehandlung der autographen Überlieferung Aufhebung des
							herkömmlichen Werk- und Autor-Begriffs</li>
						<li>Mündigkeit des Benutzers, der eigene Fragestellungen formulieren
							kann</li>
						<li>zwingt zur Bereitstellung von "Lesepfaden" und ähnlichen
							Hilfsmitteln</li>
						<li>zielt nicht unmittelbar auf eine Aufführbarkeit der Edition, sondern die
							Dokumentation der Entstehungs- und Verbreitungsgeschichte</li>
						<li>damit gibt es Defizite in der Aufbereitung des Materials [ich bin nicht
							sicher, ob wir hier noch meine Ideen einer dynamischen Anreicherung
							umsetzen können, deshalb vielleicht lieber vorsichtig formulieren], so
							dass nicht unmittelbar ein "praktischer" Text zu haben ist</li>
						<li>Desiderat bleibt ebenfalls, die aufführungsspezifischen Korrekturen in
							den Abschriften vollständig auszuwerten [Streichungen etc., hier
							schaffen wir höchstens kurze Beispiele]</li>
					</ul>-->

					<hr/>

					<h3 id="tools">4. Tools</h3>

					<p>Various tools have been developed for implementing the data model. These are divided into tools with a graphical user interface to visualize certain information and thus facilitate the data processing, and tools to use without a graphical user interface.</p>
					<ul>
						<li>MusicXML to MEI</li>
						<li>MEI Cleaning</li>
						<li>Edirom Editor</li>
						<li>Include Music in Core</li>
						<li>Include Music in Sources</li>
						<li>Merge Core and Sources</li>
						<li>Split in Pages</li>
						<li>PMD PitchProof</li>
						<li>Add IDs and Tstamps</li>
						<li>Check Durations</li>
						<li>Lyric Proof</li>
						<li>Concatenate Pages</li>
						<li>Shortcuts</li>
						<li>PMD ControlEvents</li>
						<li>Recore</li>
					</ul>
					<h4>MusicXML to MEI</h4>
					<p>MusicXML files, created in collaboration with the Carl-Maria-von-Weber-Gesamtausgabe (WeGA) from <em>Freischütz</em>-Finale-files, are used as the basis for encoding the score texts  and serve there as the raw model for editing the edition’s text (the edited texts of WeGA are later prepared with the program Score). These files essentially follow Weber’s autograph, but they write out all the abbreviation notations and already contain first editorial addenda. After export to MusicXML they are converted from partwise MusicXML to timewise MusicXML with the XSLT made available by the MusicXML community, and then converted to MEI with the XSLT made available by the MEI community.</p>
					<h4>MEI Cleaning</h4>
					<p>The generic conversion from MusicXML to MEI leaves some unwanted artifacts in the data. For example, graphical information on the positioning of individual signs is found, but it does not describe their position in the autograph, but within the Finale file. Since this information is not needed in the project, an XSLT (<strong>improveMusic.xsl</strong>) was developed to clean the MEI files first and discard all graphical information. Furthermore, it recognizes, inter alia, the incorrect encoding of tremolos (which are captured purely graphically in Finale, that is to say as notes with a line through the stem) and replaces this with the functionally correct encoding via &lt;mei:bTrem&gt; or &lt;mei:fTrem&gt;. Furthermore, certain structures are standardized and reliable xml: ids for bars are applied.</p>
					<h4>Edirom Editor</h4>
					<p>ZEdirom Editor is used, first of all, to edit the individual <em>Freischütz</em> sources in the usual manner and export them to <em>Edirom Online</em>. These files are then processed with a separate XSLT 
						(<strong>improveEditorExport.xsl</strong>). Set up in this step, are, inter alia, reliable xml:ids for bars, besides adding backlinks from &lt;mei:zone&gt; to &lt;mei:measure&gt;>. At the same time, XSLT creates a (temporary) file to be used to monitor the bar counts of the different sources, and then to ensure a concordance of the sources on the bar level by using, if  necessary, two other XSLTs 
							(<strong>recountMeasures.xsl</strong> and
						<strong>moveCoreRefs.xsl</strong>). This concordance comes about in the process only by using the identical bar numbers. 
					</p>
					<h4>Include Music in Core</h4>
					<p>Correlated in this step are the two heretofore separate databases, the Finale-based encoding of the music text as well as the editing with Edirom of the manuscript on the bar level without musical content. Note that the music encodings occur only movement-by-movement, but Edirom Editor prepares an encoding based on the complete sources.  Accordingly, the reliable XSLT  (<strong>includeMusic2core.xsl</strong>) creates a 
						<em>Core</em> file for this step, simply describing the just prepared <em>Freischütz</em>
						movement [i.e. one movement]; thus, further work steps are temporarily movement-based.</p>
					<p>The XSLT uses the xml:ids of the bars which have been normalized in the previous two steps in order to synchronize the music-text encodings with the files from Edirom Editor and to set up a new encoding. In the process, the accidental information from the sources is overruled and a 
						<em>Core</em> file is set up (see the <a href="datamodel.html">Data Model</a>). This <em>Core</em> file is free of all links to the facsimiles of the sources. At the same time, a  “blueprint” is set up, i.e., a temporary file used as a model for encoding the individual sources. This blueprint contains the accidental information discarded in the 
						<em>Core</em> and produces the correlations described in the data model between source encoding and <em>Core</em> file.</p>
					<h4>Include Music in Sources</h4>
					<p>HHere the “blueprints” created in the previous step with the files from Edirom Editor are actually merged and a combination of facsimile referencing, references to the <em>Core</em> file, and local encoding of incidental information is achieved. The <em>Core</em> concept described in the <a href="datamodel.html">Data Model</a>
						is thus first implemented at this point. The XSLT (<strong>includeMusic2source.xsl</strong>) used for this simultaneously creates facsimile references for each &lt;mei:staff&gt; element, i.e., calculates for each <strong>staff</strong> within the score, based on the scoring and dimensions of the whole bar, in which facsimile section it is to be found. This calculation is based on general assumptions and in cases of a very irregular typeface does not find the ideal page excerpt, but has proved to be very successful in the vast majority of cases and is to be preferred over time because of a sufficient quality in an extremely time-intensive manual capturing of these excerpts.</p>
					<h4>Merge Core and Sources</h4>
					<p>After the data in the <em>Core</em> model exist, the data is checked from the sources. As mentioned, the basic encodings correspond approximately to the autograph, but reproduce this after all the abbreviated forms are written out. Therefore, in a first proofreading step the data must be adapted not only to the respective source, but all “imperfections” in the source must also be reconstituted.</p>
					<p>Proving impractical has been the project’s first attempt at implementing these measures via a graphical user interface, but with direct access still to the <em>Core</em> model. Due to the need to keep track at all times of source encoding and <em>Core</em> files, the complexity of this step increases to a degree that volatility errors beyond what is tolerable become unavoidable. For this reason, another approach was used to check the data. To do this, the just induced structure is again dissolved, and the substantial information of the <em>Core</em> file is taken over into the source files via XSLT 
						(<strong>mergeCoreSource.xsl</strong>). These now exist in a meaningful file, i.e., complete in itself. However, the @sameas relationships of the individual elements remain in the <em>Core</em>, so that the possibility of returning to the <em>Core</em> is available at all times. [NB: We do not, in fact, need these references anymore, but at that point in time this was not yet foreseen in the project.]</p>
					<h4>Split in Pages</h4>
					<p>In order to facilitate proofreading the data, the movement-by-movement encodings of the individual sources are now dissolved and transferred per manuscript or printed page into individual files. This step is technically justified and facilitates the reading and storage of the data in the following working steps. The XSLT (<strong>generateSystemFiles.xsl</strong>) used for this purpose automatically generates annotations containing current information on the score
						(&lt;mei:scoreDef&gt;), in which all clef changes, altered keys, and currently valid transpositions are deposited.
					</p>
					<h4>PMD PitchProof</h4>
					<p>For this step a web-based tool was designed and implemented for use mainly in proofreading pitches and durations (see the <a href="#pitchtool">Pitch-Tool</a> described below).</p>
					<p>At the end of this work step the encodings correspond to the respective sources with respect to notes, rests, and “blank spots.”</p>
					<h4>Add IDs and Tstamps</h4>
					<p>Since in the previous step new elements have been created by hand, they do not always have a (sufficiently clear) @xml:id. In this step, the proofread data are then checked by XSLT 
						(<strong>addIDs_and_tstamps.xsl</strong>) and supplemented where necessary by @xml:ids. At the same time, the corresponding @tstamps (= beats) are automatically calculated and supplemented for events in MEI (i.e., all notes, chords, rests, etc.). With these beats, on the one hand, all ControlEvents (primarily slur placement and dynamic markings) need, on the one hand, to be able to be proofread, on the other, the existing data can be checked for plausibility (see next step).</p>
					<h4>Check Durations</h4>
					<p>At this point in the workflow, the plausibility of the previous data is checked with a Schematron file 
						(<strong>sanityCheck_durations.sch</strong>). For this purpose, the previously computed beats are compared with the current time signature to identify rhythmically “incomplete” or “overfull” bars. Most of these are volatility errors made during the proofreading process, but to a lesser extent actual “errors” in the sources. In both cases, the necessary adaptations of the encodings are made manually in Oxygen, thus assuming a detailed understanding of MEI and a high degree of discipline.</p>
					<p>While faulty data are tacitly corrected and adapted to the actual source finding, “errors” in the sources (such as, for instance, superfluous dotting, lacking rests, etc.) are marked as such and meaningfully resolved editorially. For this purpose, the MEI elements &lt;sic&gt;
						and &lt;corr&gt; are utilized, connected via a &lt;choice&gt;>. Thus, necessary at this point are the first explicitly editorial interventions in the encodings.</p>
					<h4>LyricProof</h4>
					<p>In a further manual step, the encodings of the text underlay are checked and corrected. For this purpose, an HTML file is generated with a simple XSLT  (<strong>prepareLyricsProof.xsl</strong>) in which only the text underlay is displayed and correlated to the score through diacritical signs (including bar lines and syllable separators). All necessary changes are directly made in the encodings with Oxygen.</p>
					<h4>Concatenate Pages</h4>
					<p>Before the next step, it is necessary to revise the previous division into a page-based encoding and to return to an encoding by movement.  For this purpose, the individual files are merged with an XSLT 
						(<strong>concatenateSystems.xsl</strong>)). On this occasion, the music encoding 
						&lt;mei:pb/&gt; element is added, showing the start of a new page and thus facilitating a page-based evaluation of the data.</p>
					<h4>shortcuts</h4>
					<p>The second major sub-area of proofreading the data is recording and writing out abbreviations. For this purpose, a separate list of  &lt;cpMark&gt;> elements is created, describing all abbreviations in the sources. This element is a supplementary proposal for MEI, which has hitherto not been included in the standard but has already been incorporated into other projects such as <em>Beethovens
						Werkstatt</em>. &lt;cpMark&gt; stands for <em>copy mark</em> as well as also for <em>colla parte mark</em>, since both issues can be captured with this element, created as a control event. The simple case of a bar repeat is thus described as follows:</p>
					<pre class="prettyprint"><code>&lt;cpMark staff="5" tstamp="1" tstamp2="0m+4" ref.offset="-1m+1" ref.offset2="0m+4"&gt;//&lt;/cpMark&gt;</code></pre>
					<p>The @ref.offset attribute specifies how far forward the section to be copied is to be found (in the previous bar = “-1m,” there on beat 1 “+1”). The length of the section to be copied is described by the @ref.offset2 attribute whose syntax is the same as @tstamp2 and is specified relative to the beginning of the section to be copied, as described with @ref.offset.</p>
					<p><em>Colla-parte</em> directives are specified with the same element, but with other attributes:</p>
					<pre class="prettyprint"><code>&lt;cpMark staff="5" tstamp="1" tstamp2="0m+4" ref.staff="12" dis="8" dis.place="above"&gt;c.B.in 8va&lt;/cpMark&gt;</code></pre>
					<p>Described in this encoding is that staff/@n=5 of beats 1 to 4 are to be moved an octave higher with staff/@n=12. The abbreviations in the sources can be specified as the content of the 
						&lt;cpMark&gt;-element.</p>
					<p>The &lt;cpMark&gt; elements are created in a list and refer with an additional temporary attribute to the corresponding beat. This list is produced by hand alone with the aid of the facsimiles, i.e., they are initially separate from the actual music encodings.</p>
					<p>When the &lt;cpMark&gt;(s) are created, they are first written out into the actual encodings via XSLT (<strong>resolveShortCuts.xsl</strong>) in an internal working step upstream in order to be ultimately implemented. The writing out of the abbreviations is carried out in several steps and comprises:</p>
					<ul>
						<li>Writing out tremolo directives  (&lt;mei:bTrem&gt; and
							&lt;mei:fTrem&gt;)</li>
						<li>Writing out bar repeat signs, as well as
						</li>
						<li>Writing out other <em>colla-parte</em> directives and repeat signs. 
						</li>
					</ul>
					<p>For writing out these abbreviations, the original findings (often simply a blank space in the manuscript, i.e., a 
						&lt;mei:space&gt;) is encapsulated into a &lt;mei:orig&gt;,  in which the notes to be adopted are added in a 
						&lt;mei:reg&gt;. Both are juxtaposed in a &lt;mei:choice&gt;, allowing comparison of the original source score and the completed musical score for a performance. The notes generated when the &lt;mei:reg&gt; is compiled always receive a reference to their respective models to enable tracing the respective origin for each note in the score. In this case, multi-level abbreviations are also correctly written out (for example, a multi-bar <em>colla-parte</em> directive, where bar repeats occur in the copied part).</p>
					<h4>PMD ControlEvents</h4>
					<p>Here, the <em>control events</em> taken into account in <em>Freischütz Digital</em> are proofread using four separate tools: ties (&lt;mei:slur&gt;), (de)crescendo hairpins
						(&lt;mei:hairpin&gt;), dynamic markings (&lt;mei:dynam&gt;), as well as performance directives (&lt;mei:dir&gt;).</p>

					<p> The tools are supposed to support the exact matching of the code to the respective source. This is done by the PitchTool and the ControleventTool.
					</p>
						
					<h5 id="pitchtool">PitchTool</h5> 
					<p>The PitchTool consists of a three-part arrangement of the individual staffs: The section of the respective source is matched with the rendered code. Changes are entered directly in the code section. Besides the addition and deletion of &lt;note&gt;,
						&lt;rest&gt;, &lt;clef&gt;, &lt;space&gt; und &lt;mRpt&gt; elements, their respective full or half-bar variants as well as &lt;beam&gt;, &lt;tuplet&gt;, &lt;bTrem&gt;, and
						&lt;fTrem&gt; elements, proofread here are the attributes @pname, @oct, @dur, @dot, @grace, @accid, @artic, @tie, as well as @stem.dir. The arrows above the notes show the encoded @stem.dir in the present example.</p>
						<img
							style="width: 100%; display: block; margin-right: 20px; margin-bottom:20px; float:left;"
							class="img-polaroid" src="../images/docu/PitchTool1.jpg" alt="pitchtool"
							title="Noten"/>
						
						<h5 id="controleventtool">ControleventTool</h5> 
					<p>In the ControleventTool, the correction is performed page-by-page to facilitate context-dependent decisions. Relevant are ties, hairpins, dynamic markings, as well as performance directives. Controlevents affected by abbreviations or <em>colla-parte</em> bars are treated as if the relevant places were written out. (A later assignment to the <em>colla parte</em> is possible with the &lt;expan&gt;associated with it.)</p>
						
						<h6>Slurs</h6> 
					<p>The encoded  &lt;slur&gt; of a page are listed. A selected &lt;slur&gt; element is graphically highlighted in the source and checked for the correct start and end points and correct @curvedir using the rendering. For clear reading, this is done via @startid and @endid of a slur and is automatically defined by clicking on a note in the rendering (highlighted in green). The @curvedir is corrected by way of a dropdown menu. Missing &lt;slur&gt; elements are added and obsolete elements are deleted. In cases of ambiguous reading, two start and end points can be selected, whereby an &lt;orig&gt; element is automatically created for the relevant slur, as well as  &lt;reg&gt; elements depending on the number of readings. Given in this case for the 
						&lt;orig&gt; is additionally @tstamp and @tstamp2 of the relevant slur, in order to capture its course without reference to an event. </p>
							<img
								style="width: 100%; display: block; margin-right: 20px; margin-bottom:20px; float:left;"
								class="img-polaroid" src="../images/docu/SlurProof1.jpg" alt="slurtool"
								title="Noten"/>
						
						<h6>Hairpins</h6> 
					<p>As with the SlurControl, the elements of a complete page are listed here and can be matched, supplemented, or deleted with the source. In the create or edit menu, @tstamp and @tstamp2 of a hairpin, as well as @form, @staff, and @place are to be created and/or corrected. Again, in the case individual attributes are ambiguous, a &lt;orig&gt; plus &lt;reg&gt; can be created for the respective hairpins via change-to.</p>
						<img
							style="width: 100%; display: block; margin-right: 20px; margin-bottom:20px; float:left;"
							class="img-polaroid" src="../images/docu/Hairpins.jpg" alt="pitchtool"
							title="Noten"/>
						
						<h6>Dynams &amp; Directions</h6>
					<p>The &lt;dynam&gt; and &lt;dir&gt; elements are also listed and compared page-by-page. The checking is carried out as in the case of hairpins. In addition, the corresponding text (even using the &lt;rend&gt; element for  underlined text) must also be inserted or corrected. 
							<img
								style="width: 100%; display: block; margin-right: 20px; margin-bottom:20px; float:left;"
								class="img-polaroid" src="../images/docu/Dynams.jpg" alt="pitchtool"
								title="Noten"/>	
							
							<!--Beschreibung von
						@tstamp-Kontrolle und Lyric-Proof? Hierfür gab es ja kein tool... Trotzdem
						beschreiben? Wie sieht es mit concat und shortcuts aus? Beschreibung
						nötig/sinnvoll? --></p>
					<p>It is important in this case that the control events resulting from abbreviations are also added in this step since these frequently exceed the boundaries between the existing and generated music text and cannot be automatically generated reliably.</p>
					<p>At the end of this step, full MEI encodings of the sources are presented, largely reproducing these sources diplomatically, alternatively filling out abbreviations and further gaps in the music score, and incorporating as well a first editorial treatment of the respective sources.</p>
					<h4>AddAccidGes</h4>
					<p>Before the automated merge of the data, it is necessary to add the sounding pitch of each note. For this purpose, a separate XSLT (<strong>addAccid.ges.xsl</strong>) is used to create an @pnum attribute for each note, which, in addition to the direct pitch, takes account of the interim change of key signature or local accidentals as well as transpositions and octaves.</p>
					<h4>Recore</h4>
					<p>In the temporary last step of data preparation, the verified data is again transferred to the <em>Core</em> model, i.e., a separation between substantial and accidental information is undertaken (see 
						<a href="datamodel.html">Data Model</a>). For this purpose, a new <em>Core</em> file for a movement is created via XSLT 
						(<strong>setupNewCore.xsl</strong>) with the first completely verified source of this movement, as well as the encoding of the source “depleted” concordant with the data model, so that retained is only the accidental information.</p>
					<p>With another XSLT  (<strong>merge2Core.xsl</strong>)), the other sources are then aligned with this new <em>Core</em> file and the differences are automatically captured in a two-step process.  Initially, XSLT provides a list of the differences found, which must then be checked manually using the encodings and facsimiles. XSLT is used productively only after possibly incorrect data has been cleared up. In this mode, &lt;mei:app&gt; elements are automatically created with 
						&lt;mei:rdg&gt; for each reading undertaken, and the necessary references from the source files are generated in this <em>Core</em> file.</p>
					<p>This step is extremely critical, since, on the one hand, possible encoding errors must be recognized as such, on the other, facile use of the data can lead to data that owing to their scope and complexity can only be corrected afterwards manually. This XSLT’s claim is extremely ambitious, since the similarity of the sources is evaluated in	<em>terms of content</em>, that is, different notations of the same content are also recognized as such, for example, in the case of wind parts that may be shown as a chord in one source, but as two parts in another source. Despite equal meaning, the encoding of these sources differs so markedly that an automatic comparison is anything but trivial. After differences are identified, they are reproduced as locally restricted as possible, i.e., distinguished are not only complete bars, but targeted are only the actually variant areas. This automatically achieves an encoding complying with the usual style of manual encoding. In addition, <strong>annotations are created automatically</strong>, phenomenologically describing the respective variance, and these can serve as a model for explaining the phenomenon editorially (applied manually or coordinated).</p>

					<hr/>

					<h3 id="guidelines">4. Guidelines</h3>
					<p>As part of the work, it has been shown that editorial guidelines in the form of encoding guidelines for such digital projects are a prerequisite for effective work. The openness of the XML languages TEI and MEI, allowing different forms of encoding for similar matters and meeting the specific needs of the individual projects, proves to be problematic, especially in collaborative projects, if no agreement is reached from the outset on preferred solutions. When this is not the case, subsequent processing steps often have to take into account such an abundance of alternatives hindering the project’s rapid progress.</p>
					<p>For this reason, the digital edition of the Weber complete edition has worked out for its TEI encoding such <a class="external" href="http://www.weber-gesamtausgabe.de/de/Projekt/Editionsrichtlinien_Text.html">Encoding Guidelines for the <em>text parts</em></a>, currently still available as descriptive guidelines on the project’s website, but to be incorporated into an ODD document. For FreiDi these encoding instructions were largely adopted in the text parts and supplemented by specific features of the project (see the <a href="documentation-libretti.html#codierungsrichtlinien">Documentation for the Text</a>), but the encoding principles were developed for <em>music encoding</em> only in the course of the work and had to be repeatedly modified or expanded in order to meet necessary conditions of the <em>Core</em> concept. Since the music encoding was in the hands of a small number of co-workers and also occurred in close consultation with the MEI community, documenting the guidelines for the work was not required in the project itself. It would make sense to develop such guidelines, however, as soon as further editions are to be produced in this form, though orienting to the FreiDi project’s solutions is easily feasible insofar as the MEI files from FreiDi are published via GitHub.</p>

					<hr/>

					<h3 id="workflows">5. Workflows (from Work Packages) </h3>
					<p>The starting point for <strong>developing the database</strong> in <strong>WP1.1</strong> was, on the one hand, the raw music-notation data from the overture and numbers 1-16 that served during the course of the project as editing models in collaboration with the Carl-Maria-von-Weber-Gesamtausgabe (WeGA); these data originated partly in  Finale, partly in Sibelius, and were now converted via the intermediate format MusicXML into a MEI basis, which in later steps was to be enriched by MEI-specific features and adjusted to the contents of the sources used. These were, on the one hand, Weber’s completely encoded autograph,  on the other, in the case of the numbers 6, 8 and 9 selected, the established authorized copies and the posthumous first edition of the score (for details see WP 1.3 and WP 3).</p>
					<p>The most labor-intensive part of the project was associated with <strong>WP 1.3</strong>: the <strong>MEI encoding of the music texts</strong> based on the transformations from MusicXML. Concepts were developed and tested together with Raffaele Viglianti for the further enrichment and correction of the data in MEI. At first, the focus was on the autograph. In a second step – after an intermediate evaluation of the encoding work – a concept for encoding the written sources was developed and then the encoding of numbers 6, 8 und 9 was adjusted for the eight score copies and the first edition of the score of these numbers. The need to “proofread” these codes quickly showed the limits of a checking process based solely on the code – the time expenditure is extraordinarily high due to the code’s lack of transparency (despite the principle of “human readability”) and would not have been feasible within the project’s duration for all encodings. Moreover, the consciously offered alternatives of encoding the same facts without stringent editorial guidelines lead to different solutions further complicating the correction process. Early conclusions were therefore drawn and internal <a href="#werkzeuge">proofMEI-data-Tools</a> developed based on partially visualizing the encoding, among them the above-mentioned <em>pitch-control</em> tool and the <em>controlevent</em> tool. WFurther test routines were carried out using specially developed XSLTs (see above), such as the addition of sound pitches (gestural) for transposing instruments. In addition, Schematron rules for verifying tone duration and meter were developed for carrying out a further correction process to ensure quality control.</p> 
					<p>For using in the initial phase, the <em>pitchtool</em> the data had to be transfered into an intermediate format (<a href="https://abcjs.net/">abcjs</a> or <a href="http://www.vexflow.com">VexFlow</a>), for presentation. This necessitated re-transforming or re-saving the MEI data when  revisions were necessary in the code window – establishing a clean workflow in this case also proved to be time-consuming, but was, on the other hand, compensated for by easier processing of larger data volumes. It was only during the last project phase that the <a href="http://www.verovio.org">Verovio Library</a> (Laurent Pugin) ) became available, making such a checking tool much more effective; in a currently prepared version of the MEI Score Editor, the methods practiced in FreiDi are applied in a modified form, so that a broadly usable <strong>pitchtool</strong>, well integrated into the workflow of developing digital editions (see also the latest version of <a href="http://meise.de.dariah.eu/">MEISE</a>), is likely to be available soon.</p>
					<p>Among the tasks to be dealt with in addition to the encoding was also the exploitation of all the sources relevant to the edition as facsimiles up to the level of the individual bars by saving all the position data in the MEI encoding.</p>
					<p>Beforehand, <strong>connecting the Edirom tools to the TextGrid Repository</strong> had been planned in <strong>WP 1.4</strong>. Possible interface functions for implementation were coordinated with representatives of the  <a href="https://www.textgrid.de">TextGrid-Project</a> (Würzburg and Göttingen). Due, however, to the conceptual changes of the interface functions in TextGrid <a href="https://textgridrep.org/">Repository</a>, it was only possible to connect the data to the repository with the first pre-release 0.8.0. After a test phase, the consortium decided unanimously to separate the data backup in the TextGrid Repository from the actual data presentation (which is largely done with <em>Edirom</em>) in order to guarantee the user a faster speed as well as also better availability when retrieving data.</p>
					<h4>AP 3.1 Development of a Model Digital Edition</h4>
					<p>In August 2013, the two staff members Johannes Kepper and Daniel Röwenstrunk, presented a concept for dealing with musical variance in conjunction with the MEI developer Perry Roland at the <a href="http://www.balisage.net/2013/Program.html">Balisage-Conference</a> in Montréal. Out of this, a so-called <strong>„Core“ Data Model</strong>l was developed for both music and text editing; responsible for the former was J. Kepper, for the latter, Raffaele Viglianti. Kepper has described this model in more detail in a <a href="datamodel.html">post on this project page</a>. The starting point was the problem that the detailed recording/registration of variance across sources proved to be impractical in view of the large number of sources to be collated, since already marginal differences quickly lead to a “branching” of the encoding in the sense of the <a href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/TC.html">Parallel-Segmentation-Method</a>, creating highly redundant data which makes readability and processing more difficult. The alternative possibility of viewing all sources on their own and capturing them in their own files offers the advantage of having to consider only the uncertainties of a single document in a diplomatic encoding. However, the redundancy problem increases, since all unchanging parts must be separately stored for each source, and data can only be linked from outside via a separate concordance. The <em>Core</em> concept attempts to combine the respective advantages of both methods by placing identical text in a central file and referring to the separate encodings (capturing all singular diplomatic aspects) of the individual sources by bypassing redundant duplications. At the same time, a concordance of the data is generated by means of a largely automatable linking.</p>
					<p>Analysis of the encodings, especially of the music texts (but also of the libretto’s textual aspects), unexpectedly produced complex issues or requirements for the encoding model. This led to the need for developing numerous technically supportive, semi-automatic workflows (based on XSLT, Schematron, RNG, see the description of the tools) in order to evaluate in detailed comparison the deviations of the sources based on the bar concordance generated. Significant developments in the model had to be concentrated in this area, since these concepts did not make sense without exploring these foundations.</p>
					<h4>AP 3.2 Development of the Digital Edition</h4>
					<p>In the course of work, it became apparent that a clear distinction between encoding work in WP 1.3 and preparation of the edition in WP 3.2 is hardly possible.  Interpretive editorial interventions are already necessary as part of the source documentation. This mainly concerns the secondary layer of the music text, whose encoding is performed in MEI via so-called <em>Control-Events</em>. For this reason, the proofreading tools had to be expanded to include editorial editing, and the corresponding works, despite their purely documentary character in part, were moved to this WP, especially since due to the developed model the resulting encodings already present a digital edition’s first stage. The utilization of <strong>&lt;choice/&gt;</strong> was used as a criterion for the definition of WP 1.3 and WP 3.2: This element can be used to capture equivocal source situations, i.e., in the case of <em>ControlEvents</em>, for instance, ambiguous slurs or problems of assigning dynamics.</p> 
					<p>In this sense, editorial aspects have expanded the <em>ControlEvents</em> proofreading tools, and numerous smaller auxiliary tools based on XSLT have been developed to determine, for example, the respective beats of all notes or other entries in the sources. The following further steps were implemented: 
				<ul>
					<li>For abbreviations, such as <em>colla-parte</em> directives and bar repeats, a <em>Stand-off</em> capture was conceived and then the data from the developed model was audited, re-adjusted, and on this basis all corresponding entries in the selected numbers as well as in the complete autograph were captured. This model for capturing abbreviations was then also proposed to the MEI community. </li>
					<li>Also implemented was an alternative automatic writing-out of the abbreviations with simultaneous documentation of the original findings and the reference points to the respective model of the written-out text.</li>
					<li>BBased on the Schematron rules created in WP 1.3, obvious copying or engraving errors were edited in the sources. For example,  <strong>&lt;sic/&gt;</strong> was used to identify rhythmic inconsistencies and the corresponding writing-out via <strong>&lt;corr/&gt;</strong> (correction recommended), both of which are connected &lt;choice/&gt; element.</li>
					<li>As a preparation for automatically adjusting the encodings of the individual sources, an XSLT was prototypically implemented for determining the actual sounding pitch of each note, taking into account transposition directives, key signature, and relevant further provisions in the course of the movement.</li>
					<li>Furthermore, a semi-automatic comparison of the individual sources was developed using the mentioned central “<em>Core</em> file”, •	in which all deviations of the primary parameters of the movements considered are documented as variants, and referred to are all the sources compared in a kind of concordance at the single-character level. The goal was a complete documentation of the source deviations (initially regardless of their relevance to an editorial eye!).</li>
					<li>An alternative and simplified workflow has been developed for those numbers captured exclusively in the autograph, which results in less of an access depth but which spectacularly accelerates the data production, thus offering considerably greater sustainability for other projects. </li>
					<li>Finally, a new <strong>prototype for encoding and rendering annotations</strong> was to be conceived and implemented. Besides quasi semi-automatic annotations generated using the <em>Core</em> •	file, annotations to the numbers 6, 8 and 9 were also adapted from WeGA to illustrate the different role and significance of annotations. The important areas of linking annotations and the role of individual overlapping annotations, for which there are also hardly any digital equivalents in the field of literature, had to be excluded for lack of time.</li>
				</ul>
					</p>
					<p>The project partners are aware that especially in the area of realizing editorial concepts, the analysis of the complex encoding problems has led to the fact that the original idea of providing satisfactory solutions could not be realized. For the project’s purposes, however, the intensive examination of these basic encoding questions seemed to be more important, since further concepts could be developed from this. It can be emphasized against this background that the project has succeeded in furnishing practical proof that in principle conventional collation methods (e.g., with the aid of <a href="http://collatex.net/">collateX</a>) also work with music encoding, so that evaluating source comparisons based on automated collation could take place in the future (though still further remote).</p>
					<p>In the final phase of the project, a series of texts were written to introduce and explain the edition within <em>Edirom Online</em>, including an extensive chapter on the genesis and transmission of the music, with links to the corresponding WeGA documents, as well as a chapter on the work’s reception.</p>
				</div>
			</div>

		</div>
	    
	    <script type="text/javascript">
	        window.activeNavLink = 'nav_documentation';
	    </script>
	    
	</section>


            <div id="footer"
                style="padding-top: 5px; text-align: center; background-color: #EEEEEE; background-image: -moz-linear-gradient(center top , #F5F5F5 0%, #EEEEEE 100%);     background-repeat: repeat-x;     border: 1px solid #E5E5E5;     border-radius: 4px 4px 4px 4px;     height: 24px;     margin-bottom: 20px;     margin-top: 40px;     width: 100%;"
                    ><a style="margin-right: 6px;" href="imprint.html">Imprint</a> · <a
                        style="margin-left: 8px;" href="contact.html">Contact</a></div>
        </div>
        <script src="../scripts/jquery-1.12.3.min.js"></script>
        <script src="../scripts/bootstrap.js"></script>
        <script src="../scripts/main.js"></script>
        <script src="../scripts/run_prettify.js"></script>
    </body>
</html>
